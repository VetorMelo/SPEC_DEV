<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Documentos</title>
    <link rel="stylesheet" href="./workflow.css">
</head>
<body>
    <!-- Navbar -->
    <nav>
        <div class="navbar">
            <a href="#">Home</a>
            <a href="#">Sobre</a>
            <a href="#">Contato</a>
            <a href="./index.html">Sair</a>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Menu</h2>
            <ul>
                <li><a href="./work_menu_docs.html">Documentos</a></li>
                <li><a href="#">Status</a></li>
                <li><a href="#">Configurações</a></li>
                <li><a href="#">Ajuda</a></li>
            </ul>
        </aside>

        <!-- Formulário de Cadastro de Documento -->
        <div class="document-container">
            <h2>Cadastrar Documento</h2>
            <form id="documentForm">
                <label for="docName">Nome do Documento:</label>
                <input type="text" id="docName" name="docName" required>
                
                <label for="docNumber">Número do Documento:</label>
                <input type="text" id="docNumber" name="docNumber" required>

                <label for="authorEmail">Email do Autor:</label>
                <input type="email" id="authorEmail" name="authorEmail" required>

                <label for="checkerEmail">Email do Checador:</label>
                <input type="email" id="checkerEmail" name="checkerEmail" required>

                <label for="approverEmail">Email do Aprovador:</label>
                <input type="email" id="approverEmail" name="approverEmail" required>

                <label for="docFile">Anexar Documento:</label>
                <input type="file" id="docFile" name="docFile" required>

                <button type="submit">Cadastrar Documento</button>
            </form>
            <p id="statusMessage" style="color: green; display: none;">Documento cadastrado com sucesso.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Seu Sistema de Documentos</p>
    </footer>

    <script>
        document.getElementById("documentForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const formData = new FormData(this);

            fetch('http://localhost:3000/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("statusMessage").innerText = data.message;
                document.getElementById("statusMessage").style.display = "block";
            })
            .catch(error => {
                console.error('Erro ao cadastrar documento:', error);
                alert('Erro ao cadastrar documento.');
            });
        });
    </script>
</body>
</html>
